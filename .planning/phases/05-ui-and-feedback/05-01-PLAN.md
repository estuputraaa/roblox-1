---
phase: 05-ui-and-feedback
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - src/ServerScriptService/Main.server.lua
  - src/ReplicatedStorage/Shared/Remotes/RemoteNames.lua
  - src/ServerScriptService/Services/GameDirector.lua
autonomous: true
must_haves:
  truths:
    - "Server mengirim HUD update periodik untuk day/cash/objective/timer/phase."
    - "Server mengirim event feed untuk warning anomaly dan state transisi penting."
    - "Payload fail/continue/ending tersedia ke client lewat remotes standar."
  artifacts:
    - path: src/ServerScriptService/Main.server.lua
      provides: "Feedback broadcaster server->client dengan guard interval."
  key_links:
    - from: src/ServerScriptService/Main.server.lua
      to: src/ReplicatedStorage/Shared/Remotes/RemoteNames.lua
      via: "ensure remotes dan FireAllClients"
---

<objective>
Membangun pipeline feedback server-side ke HUD client.

Purpose: Menjadikan state game runtime terlihat oleh pemain secara real-time.
Output: remote updates untuk HUD/day/phase/timer/event feed/fail/continue/ending.
</objective>

<execution_context>
@.claude/get-shit-done/workflows/execute-plan.md
@.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-ui-and-feedback/05-CONTEXT.md
@.planning/phases/05-ui-and-feedback/05-RESEARCH.md
@src/ServerScriptService/Main.server.lua
@src/ReplicatedStorage/Shared/Remotes/RemoteNames.lua
</context>

<tasks>

<task type="auto">
  <name>Task 1: Tambah feedback broadcaster remotes di Main.server</name>
  <files>src/ServerScriptService/Main.server.lua, src/ReplicatedStorage/Shared/Remotes/RemoteNames.lua</files>
  <action>Pastikan semua remote feedback fase UI tersedia (`HUDUpdate`, `DayPhaseUpdate`, `DayTimerUpdate`, `DayTransition`, `EventFeed`, `FailTriggered`, `ContinuePrompt`, `EndingTriggered`). Implement helper broadcast dan payload standar (type/message/level/timestamp).</action>
  <verify>Review Main menunjukkan ensure remote lengkap dan helper FireAllClients fail-safe.</verify>
  <done>Pipeline komunikasi server-client untuk feedback runtime tersedia.</done>
</task>

<task type="auto">
  <name>Task 2: Push HUD payload periodik + on-change</name>
  <files>src/ServerScriptService/Main.server.lua, src/ServerScriptService/Services/GameDirector.lua</files>
  <action>Kirim payload HUD berkala (mis. 0.5s) berisi day/phase/cash/objective/timeRemaining/state. Tambahkan push langsung saat day/phase/state berubah agar UI tidak stale.</action>
  <verify>Heartbeat memiliki accumulator untuk HUD update dan detector transisi state/day/phase.</verify>
  <done>HUD client menerima update real-time yang stabil tanpa spam berlebih.</done>
</task>

<task type="auto">
  <name>Task 3: Integrasi event feed status penting</name>
  <files>src/ServerScriptService/Main.server.lua</files>
  <action>Publish event feed untuk transisi hari/fase, anomaly warning, fail/continue state, serta ending trigger info ringkas. Pastikan hint objective ending ikut dipush ke HUD payload.</action>
  <verify>Jalur runtime memiliki event feed publish di state kritikal dan payload objective hint tersusun.</verify>
  <done>Pemain mendapat feedback konteks game yang cukup untuk mengambil keputusan.</done>
</task>

</tasks>

<verification>
- [ ] Remotes feedback tersedia dan dipublish server-side.
- [ ] HUD payload dikirim periodik + on-change.
- [ ] Event feed menampilkan status penting termasuk anomaly/fail/ending.
</verification>

<success_criteria>
- UI-01 terpenuhi dari sisi data pipeline server.
- Fondasi UI-02 siap dikonsumsi controller client.
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-and-feedback/05-01-SUMMARY.md`
</output>
